  # ----------------------------------------------------------
  # 1) CORE â€” portÃ©e(s) SMART pour tout bipartite
  # ----------------------------------------------------------
- id: BIP_G_CORE
  when_group: "bipartite"
  scope_strategy: "SUBJECT_VERB_OBJECT"
  options:
    include_subject: true
    include_object: true
    include_predicative_attribute: true      # ğŸ”¥ nouveau â†’ attr. du sujet (verbe "Ãªtre")
    include_passive_participle: true         # ğŸ”¥ nouveau â†’ voix passive complÃ¨te
    exclude_adjuncts: true
    max_token_gap: 12                        # un peu plus permissif
    stop_punct: [".",";",":"]
  notes: >
    RÃ¨gle de portÃ©e principale pour les nÃ©gations bipartites ("ne â€¦ pas / plus / jamais / rien / personne").
    - Inclure systÃ©matiquement le sujet explicite + le prÃ©dicat ou lâ€™entitÃ© niÃ©e.
    - Conserver les complÃ©ments essentiels (objets, GN introduits par "de").
    - Exclure les complÃ©ments circonstanciels (temps, lieu, cause).
    - Exclure les cas de restriction "ne â€¦ que" (filtrÃ©s par une autre rÃ¨gle).
    - Si le sujet est un pronom nÃ©gatif ("rien", "personne"), inclure le prÃ©dicat complet.
      - Inclure systÃ©matiquement le sujet explicite.
    - Si le verbe est copule ("Ãªtre"), inclure lâ€™attribut (adj/nom).
    - Si la construction est passive, inclure le groupe verbal complet (auxiliaires + participe).
    - Conserver les COD/COI/complÃ©ments essentiels.
    - Exclure les circonstanciels (temps, lieu, cause).
  examples:
    - "Les patients nâ€™ont pas prÃ©sentÃ© de complication. â†’ patients, complication"
    - "Lâ€™IRM nâ€™a pas montrÃ© de rÃ©cidive. â†’ IRM, rÃ©cidive"
    - "Le rÃ©sultat nâ€™est pas concluant. â†’ rÃ©sultat, concluant"
    - "Rien nâ€™a Ã©tÃ© observÃ©. â†’ (scope complet) rien, a Ã©tÃ© observÃ©"
    - "Lâ€™examen nâ€™a pas rÃ©vÃ©lÃ© dâ€™anomalie. â†’ examen, anomalie"
    - "Le traitement nâ€™a pas amÃ©liorÃ© lâ€™Ã©tat du patient. â†’ traitement, Ã©tat du patient"
    - "Lâ€™Ã©chographie nâ€™a pas dÃ©tectÃ© de fracture. â†’ Ã©chographie, fracture"
    - "Le patient nâ€™a pas terminÃ© son traitement. â†’ patient, traitement"
  # ----------------------------------------------------------
  # 1.b) RÃ©solution de cooccurrence avec le groupe 'determinant'
  #   - Si 'ne â€¦' et un dÃ©terminant nÃ©gatif visent la MÃŠME entitÃ© â†’ 1 seul scope partagÃ©
  #   - Sinon (cibles distinctes) â†’ scopes sÃ©parÃ©s (on ne fusionne pas)
  # ----------------------------------------------------------
- id: BIP_G_COOC_DET_RESOLVE
  when_group: "bipartite"
  scope_strategy: "RESOLVE_COOCURRENCE"
  options:
    with_group: "determinant"
    same_clause_max_tokens: 40
    merge_if_same_target: true
    merge_strategy: "UNION_ON_SAME_NP_HEAD"   # mÃªme tÃªte nominale â†’ fusion
    keep_distinct_if_frames_differ: true      # ex. copule vs dÃ©terminant â†’ ne pas fusionner
  notes: >
    RÃ©solution des cooccurrences bipartite + dÃ©terminant :
    - Si les deux visent la mÃªme entitÃ© â†’ un seul scope fusionnÃ©.
    - Si ce sont des cibles distinctes â†’ scopes sÃ©parÃ©s.
  examples:
    - "Aucune rÃ©cidive nâ€™a Ã©tÃ© constatÃ©e. â†’ scope: rÃ©cidive"     # fusion (mÃªme tÃªte nominale)
    - "Aucun Ã©vÃ©nement indÃ©sirable nâ€™est attendu. â†’ scope: Ã©vÃ©nement indÃ©sirable, attendu"  # distincts
# ----------------------------------------------------------
# 2) SUPPORT_AUTO â€” gouverneurs 0..N (patient/examen/doc/agent), gauche & droite
#   - reprend le canevas locutions/determinant, avec prÃ©positions droites data-driven
# ----------------------------------------------------------
- id: BIP_G_SUPPORT_AUTO
  when_group: "bipartite"
  scope_strategy: "GOVERNOR_SUPPORT_AUTO"
  options:
    # FenÃªtres
    left_window_tokens: 12
    right_window_tokens: 14

    # PrÃ©positions droites (data-driven, multi-catÃ©gories â€” rÃ©utilise tes listes externes)
    right_support_preps:
      agency_external:      "RIGHT_SUPPORT_PREPS_AGENCY"
      normative_external:   "RIGHT_SUPPORT_PREPS_NORMATIVE"
      reference_external:   "RIGHT_SUPPORT_PREPS_REFERENCE"

    # SÃ©lection candidats
    allowed_pos: ["NOUN","PROPN"]
    prefer_dep_path: true
    allowed_governor_rels: ["nsubj","nsubj:pass","obl","obl:agent","nmod","appos","conj","parataxis","compound"]
    ban_dep_labels: ["expl"]
    stopwords_governors: ["il","elle","cela","ceci","on","nous","vous","ils","elles","y","lâ€™","l'"]

    # Titres/documents Ã  gauche
    consider_section_titles: true
    title_left_window_tokens: 20
    title_trigger_regex: ":[\\s\\-â€“â€”]*$"
    title_attach_policy: "closest_left_title"

    prefer_support_types: ["SUJET_PATIENT","EXAMEN_PROCEDURE","DOCUMENT_SOURCE","ORGANE_SIEGE","INSTITUTION_NORME"]

    # Rattachement & multi
    tie_to_core_scope: true
    attach_to_all_scopes: true
    multi_support: true
    max_support: 3
    coalesce_duplicates: true
    output_role: "support"

  guards:
    deny_if_group_present:
      group: "preposition"
      labels: ["sans"]
      window_tokens: 8
      precedence: "higher"
  notes: >
      Attache le sujet patient, lâ€™examen, le document/source, ou un agent normatif/rÃ©fÃ©rence,
      sans affecter la polaritÃ© (role='support').
  examples:
      - "Personne ne tousse. â†’ scope: personne, tousse"
      - "Lâ€™IRM ne montre pas de rÃ©cidive. â†’ scope: IRM, rÃ©cidive"
      - "La patiente nâ€™a pas prÃ©sentÃ© de complication. â†’ scope: patiente, complication"
      - "Le patient ne parvient pas Ã  avaler de liquide. â†’ scope: patient, avaler, liquide"
      - "Absence de validation conformÃ©ment au protocole interne. â†’ scope: protocole interne, validation"
      - "Absence de donnÃ©es en accord avec la littÃ©rature. â†’ scope: littÃ©rature, donnÃ©es"


  # ----------------------------------------------------------
  # 0) Garde "ne â€¦ que" (sÃ©curitÃ© si le marker nâ€™a pas dÃ©jÃ  SKIP)
  # ----------------------------------------------------------
- id: BIP_G_SKIP_NE_QUE
  when_group: "bipartite"
  scope_strategy: "SKIP_IF_PATTERN"
  priority: "very_high"
  options:
    pattern: "\\b(n['â€™]?|ne)\\b\\s+\\bque\\b"   # simplifiÃ©
    regex: true
    case_insensitive: true
    max_token_gap: 8
    stop_punct: [".",";",":"]
    fallback_char_gap: 40   # utilisÃ© seulement si la segmentation en tokens Ã©choue
    exclude_verbs_from_scope : true
  notes: >
    "ne â€¦ que" exprime une restriction (â‰ˆ seulement), pas une nÃ©gation.
    PrioritÃ© au gap en tokens (max_token_gap: 8).
    Le fallback caractÃ¨res (40) nâ€™est utilisÃ© quâ€™en cas de segmentation dÃ©faillante.
  examples:
    - "Il ne mange que des lÃ©gumes. â†’ (skip, restriction)"
    - "Elle nâ€™a que deux enfants. â†’ (skip, restriction)"
    - "Le patient ne prÃ©sente que des symptÃ´mes mineurs. â†’ (skip, restriction)"
    - "On nâ€™observe que de rares anomalies. â†’ (skip, restriction)"
    - "Il nâ€™y a eu que des cas isolÃ©s. â†’ (skip, restriction)"