{"id": 1, "text": "Les patients n’ont pas présenté de complication postopératoire.", "pipeline_step": "STEP1_DETERMINISTIC", "candidates_rules_ID_cues": [{"group": "bipartite", "rules": ["NE_BIPARTITE_EXTENDED", "NE_ELLIPTIQUE_VERBAL", "NE_COEXISTE_AVEC_DETERMINANT", "NE_RESTRICTIF_EXCLUSION", "BIP_PLUS_ONLY_WITH_NE"]}], "cues": [{"id": "NE_BIPARTITE_EXTENDED", "cue_label": "ne pas", "start": 13, "end": 22, "group": "bipartite"}], "candidates_rules_ID_scopes": [{"group": "bipartite", "rules": ["BIP_G_SKIP_NE_QUE", "BIP_G_CORE", "BIP_G_COOC_DET_RESOLVE", "BIP_G_SUPPORT_AUTO"]}], "scopes": [{"id": "BIP_G_CORE", "scope": "<LLM_APPLY_RULE>", "start": 22, "end": -1}], "llm_contract": {"mode": "permissive_mandatory_completion", "policy": "MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Exécute aussi toutes les pending_rules fournies : relis la règle, écris la règle et applique-la au cue.MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Priorité absolue aux candidats du runner. Si un lexème/structure indique une négation non couverte, ajoute-la avec id='LLM_FALLBACK' et group='inference', puis calcule la portée avec les mêmes stratégies. Fusionne les scopes identiques. Respecte strictement le schéma de sortie.", "rules_obligations": [{"id": "BIP_G_CORE", "require_subject": true, "description": "Inclure le sujet grammatical dans une portée distincte."}, {"id": "GOVERNOR_SUPPORT_AUTO", "require_support": true, "description": "Inclure les entités de support normatives (selon, d’après, etc.)."}, {"id": "ALL_MARKERS", "require_cue_completion": true, "description": "Compléter les marqueurs manquants si un lexème connu apparaît, même si redondant."}], "hints": {"lexeme_hits": [{"group": "bipartite", "lexeme": "n’"}, {"group": "bipartite", "lexeme": "pas"}], "missing_groups": []}, "fallback_schema": {"cue": {"id": "LLM_FALLBACK", "group": "inference", "cue_label": "<forme canonique>", "start": -1, "end": -1}, "scope": {"id": "<STRATEGY_ID>", "scope": "<texte>", "start": -1, "end": -1}}, "pending_rules": [{"policy": "READ_AND_APPLY_RULE", "rule_id": "BIP_G_CORE", "rule_yaml": {"id": "BIP_G_CORE", "when_group": "bipartite", "scope_strategy": "NEP_SMART", "options": null, "max_token_gap": 8, "stop_punct": [".", ";", ":"], "frames_order": ["PRON_NEG_SUJET", "COPULA_ATTR", "CONSTATER_EXAM", "OCCURRENCE", "ACTION_VP", "FALLBACK"], "verbs_copula_external": "BIP_VERBS_COPULA", "verbs_constater_external": "BIP_VERBS_CONSTATER", "verbs_occurrence_external": "BIP_VERBS_OCCURRENCE", "pron_neg_subjects": ["rien", "personne"], "pron_scope_policy": "full_then_minimal", "pron_scope_max_tokens": 12, "pron_minimal_strategy": "VP_MINIMAL_CORE", "raising_verbs_external": "RAISING_OR_LIGHT_VERBS", "prefer_xcomp_infinitive": true, "minimal_include_objects": true, "minimal_exclude_adjuncts": true, "adjunct_preps_nonessential_external": "ADJUNCT_PREPS_NONESSENTIAL", "copula_include_subject_in_scope": true, "constater_extract_entity": true, "prefer_de_gn_if_present": true, "constater_include_subject_in_scope": true, "emit_multi_scopes": true, "coord": {"prefer_dep_label": "conj", "surface_conj": ["et", ","], "split_on_shared_head": true}, "occurrence_extract_entity": true, "occurrence_include_subject_in_scope": true, "action_vp_minimal": true, "action_include_subject_in_scope": true, "fallback": {"strategy": "WINDOW_RIGHT_SMART", "window_tokens": 8, "reject_if_only_verb": true, "exclude_verbs_from_scope": true}, "deny_if_group_present": {"group": "preposition", "labels": ["sans"], "window_tokens": 8, "precedence": "higher"}, "notes": "Le fallback ne doit jamais produire une portée réduite au verbe seul. - Si seule une forme verbale est capturée → rejeter. - Si un verbe + GN → exclure le verbe et garder le GN. - Objectif : toujours retourner un complément informatif plutôt qu’un verbe isolé. PRON_NEG_SUJET:\n  - Par défaut: portée = prédicat complet.\n  - Si le prédicat dépasse {pron_scope_max_tokens} tokens → fallback 'VP_MINIMAL_CORE':\n    * saute les verbes de montée/auxiliaires légers (RAISING_OR_LIGHT_VERBS),\n    * privilégie l’infinitif de contenu (xcomp) si présent,\n    * inclut objets/compléments essentiels (obj, xcomp, comp 'à/de'),\n    * exclut les adjuncts non essentiels (advmod/obl avec préps de ADJUNCT_PREPS_NONESSENTIAL).\n\nCOPULA_ATTR / CONSTATER / OCCURRENCE / ACTION_VP:\n  - Tous configurés avec *_include_subject_in_scope: true\n  - Donc la portée inclut aussi le sujet (ex.: \"IRM ne montre pas\" → IRM).\n", "examples": ["Personne ne tousse. → scope: personne, tousse", "Rien ne fonctionne. → scope: rien, fonctionne", "Personne ne semble vouloir reprendre le traitement en cours malgré les explications du médecin.", "Le résultat n’est pas concluant. → scope: résultat, concluant", "L’IRM ne montre pas de récidive. → scope: IRM, récidive", "La patiente n’a pas présenté de complication. → scope: patiente, complication", "Le patient ne parvient pas à avaler de liquide. → scope: patient, avaler, liquide"], "_file": "rules\\20_scopes\\bipartites.yaml"}, "cue": {"id": "NE_BIPARTITE_EXTENDED", "cue_label": "ne pas", "start": 13, "end": 22, "group": "bipartite"}, "text": "Les patients n’ont pas présenté de complication postopératoire.", "notes": "Relis la règle YAML, écris la règle, applique-la au cue pour générer le scope correct. Respecte start/end."}]}, "LLM_actions": [], "LLM_ajouts": {"cues": [], "scopes": []}}
{"id": 2, "text": "L’examen clinique était sans particularité notable.", "pipeline_step": "STEP1_DETERMINISTIC", "candidates_rules_ID_cues": [{"group": "preposition", "rules": ["PREP_NEG_GENERIQUE", "PREP_NEG_INF", "PREP_NEG_PARTICULARITE", "PREP_NEG_MODALITE", "PREP_NEG_JURIDIQUE", "PREP_NEG_SKIP", "PREP_SKIP_NON_EXCEPTIONS"]}], "cues": [{"id": "PREP_NEG_PARTICULARITE", "cue_label": "sans", "start": 24, "end": 28, "group": "preposition"}], "candidates_rules_ID_scopes": [{"group": "preposition", "rules": ["PREP_G_SKIP_LEXICALIZED", "PREP_SANS_CORE", "PREP_SANS_SUPPORT_AUTO", "PREP_G_FALLBACK"]}], "scopes": [], "llm_contract": {"mode": "permissive_mandatory_completion", "policy": "MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Exécute aussi toutes les pending_rules fournies : relis la règle, écris la règle et applique-la au cue.MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Priorité absolue aux candidats du runner. Si un lexème/structure indique une négation non couverte, ajoute-la avec id='LLM_FALLBACK' et group='inference', puis calcule la portée avec les mêmes stratégies. Fusionne les scopes identiques. Respecte strictement le schéma de sortie.", "rules_obligations": [{"id": "BIP_G_CORE", "require_subject": true, "description": "Inclure le sujet grammatical dans une portée distincte."}, {"id": "GOVERNOR_SUPPORT_AUTO", "require_support": true, "description": "Inclure les entités de support normatives (selon, d’après, etc.)."}, {"id": "ALL_MARKERS", "require_cue_completion": true, "description": "Compléter les marqueurs manquants si un lexème connu apparaît, même si redondant."}], "hints": {"lexeme_hits": [{"group": "conjonction", "lexeme": "ni"}], "missing_groups": ["conjonction"]}, "fallback_schema": {"cue": {"id": "LLM_FALLBACK", "group": "inference", "cue_label": "<forme canonique>", "start": -1, "end": -1}, "scope": {"id": "<STRATEGY_ID>", "scope": "<texte>", "start": -1, "end": -1}}, "pending_rules": []}, "LLM_actions": [], "LLM_ajouts": {"cues": [], "scopes": []}}
{"id": 3, "text": "Aucun signe de récidive n’a été détecté à l’IRM.", "pipeline_step": "STEP1_DETERMINISTIC", "candidates_rules_ID_cues": [{"group": "determinant", "rules": ["AUCUN_DET_SYNONYMES_NUL", "DET_NEG_GENERIQUE", "DET_NEG_ADJ_DIFF", "DET_NEG_COOC_NE", "DET_NEG_DOUBLE_SANS", "DET_NEG_PAS_REINFORCED", "DET_NEG_JAMAIS_DET", "QC_DET_COEX_BIPARTITE"]}], "cues": [{"id": "DET_NEG_GENERIQUE", "cue_label": "Aucun", "start": 0, "end": 5, "group": "determinant"}], "candidates_rules_ID_scopes": [{"group": "determinant", "rules": ["DET_G_CORE", "DET_G_SUPPORT_AUTO"]}], "scopes": [{"id": "DET_G_CORE", "scope": "signe de récidive n'a été détecté à l'IRM", "start": -1, "end": -1}], "llm_contract": {"mode": "permissive_mandatory_completion", "policy": "MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Exécute aussi toutes les pending_rules fournies : relis la règle, écris la règle et applique-la au cue.MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Priorité absolue aux candidats du runner. Si un lexème/structure indique une négation non couverte, ajoute-la avec id='LLM_FALLBACK' et group='inference', puis calcule la portée avec les mêmes stratégies. Fusionne les scopes identiques. Respecte strictement le schéma de sortie.", "rules_obligations": [{"id": "BIP_G_CORE", "require_subject": true, "description": "Inclure le sujet grammatical dans une portée distincte."}, {"id": "GOVERNOR_SUPPORT_AUTO", "require_support": true, "description": "Inclure les entités de support normatives (selon, d’après, etc.)."}, {"id": "ALL_MARKERS", "require_cue_completion": true, "description": "Compléter les marqueurs manquants si un lexème connu apparaît, même si redondant."}], "hints": {"lexeme_hits": [{"group": "bipartite", "lexeme": "ne"}, {"group": "bipartite", "lexeme": "n’"}], "missing_groups": ["bipartite"]}, "fallback_schema": {"cue": {"id": "LLM_FALLBACK", "group": "inference", "cue_label": "<forme canonique>", "start": -1, "end": -1}, "scope": {"id": "<STRATEGY_ID>", "scope": "<texte>", "start": -1, "end": -1}}, "pending_rules": []}, "LLM_actions": [], "LLM_ajouts": {"cues": [], "scopes": []}}
{"id": 4, "text": "Il n’existe pas de preuve scientifique soutenant cette hypothèse.", "pipeline_step": "STEP1_DETERMINISTIC", "candidates_rules_ID_cues": [{"group": "bipartite", "rules": ["NE_BIPARTITE_EXTENDED", "NE_ELLIPTIQUE_VERBAL", "NE_COEXISTE_AVEC_DETERMINANT", "NE_RESTRICTIF_EXCLUSION", "BIP_PLUS_ONLY_WITH_NE"]}, {"group": "determinant", "rules": ["AUCUN_DET_SYNONYMES_NUL", "DET_NEG_GENERIQUE", "DET_NEG_ADJ_DIFF", "DET_NEG_COOC_NE", "DET_NEG_DOUBLE_SANS", "DET_NEG_PAS_REINFORCED", "DET_NEG_JAMAIS_DET", "QC_DET_COEX_BIPARTITE"]}], "cues": [{"id": "DET_NEG_GENERIQUE", "cue_label": "pas de", "start": 12, "end": 15, "group": "determinant"}, {"id": "NE_BIPARTITE_EXTENDED", "cue_label": "ne pas", "start": 3, "end": 15, "group": "bipartite"}], "candidates_rules_ID_scopes": [{"group": "bipartite", "rules": ["BIP_G_SKIP_NE_QUE", "BIP_G_CORE", "BIP_G_COOC_DET_RESOLVE", "BIP_G_SUPPORT_AUTO"]}, {"group": "determinant", "rules": ["DET_G_CORE", "DET_G_SUPPORT_AUTO"]}], "scopes": [{"id": "BIP_G_CORE", "scope": "<LLM_APPLY_RULE>", "start": 15, "end": -1}, {"id": "DET_G_CORE", "scope": "preuve scientifique soutenant cette hypothèse", "start": 19, "end": 64}], "llm_contract": {"mode": "permissive_mandatory_completion", "policy": "MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Exécute aussi toutes les pending_rules fournies : relis la règle, écris la règle et applique-la au cue.MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Priorité absolue aux candidats du runner. Si un lexème/structure indique une négation non couverte, ajoute-la avec id='LLM_FALLBACK' et group='inference', puis calcule la portée avec les mêmes stratégies. Fusionne les scopes identiques. Respecte strictement le schéma de sortie.", "rules_obligations": [{"id": "BIP_G_CORE", "require_subject": true, "description": "Inclure le sujet grammatical dans une portée distincte."}, {"id": "GOVERNOR_SUPPORT_AUTO", "require_support": true, "description": "Inclure les entités de support normatives (selon, d’après, etc.)."}, {"id": "ALL_MARKERS", "require_cue_completion": true, "description": "Compléter les marqueurs manquants si un lexème connu apparaît, même si redondant."}], "hints": {"lexeme_hits": [{"group": "bipartite", "lexeme": "n’"}, {"group": "bipartite", "lexeme": "pas"}], "missing_groups": []}, "fallback_schema": {"cue": {"id": "LLM_FALLBACK", "group": "inference", "cue_label": "<forme canonique>", "start": -1, "end": -1}, "scope": {"id": "<STRATEGY_ID>", "scope": "<texte>", "start": -1, "end": -1}}, "pending_rules": [{"policy": "READ_AND_APPLY_RULE", "rule_id": "BIP_G_CORE", "rule_yaml": {"id": "BIP_G_CORE", "when_group": "bipartite", "scope_strategy": "NEP_SMART", "options": null, "max_token_gap": 8, "stop_punct": [".", ";", ":"], "frames_order": ["PRON_NEG_SUJET", "COPULA_ATTR", "CONSTATER_EXAM", "OCCURRENCE", "ACTION_VP", "FALLBACK"], "verbs_copula_external": "BIP_VERBS_COPULA", "verbs_constater_external": "BIP_VERBS_CONSTATER", "verbs_occurrence_external": "BIP_VERBS_OCCURRENCE", "pron_neg_subjects": ["rien", "personne"], "pron_scope_policy": "full_then_minimal", "pron_scope_max_tokens": 12, "pron_minimal_strategy": "VP_MINIMAL_CORE", "raising_verbs_external": "RAISING_OR_LIGHT_VERBS", "prefer_xcomp_infinitive": true, "minimal_include_objects": true, "minimal_exclude_adjuncts": true, "adjunct_preps_nonessential_external": "ADJUNCT_PREPS_NONESSENTIAL", "copula_include_subject_in_scope": true, "constater_extract_entity": true, "prefer_de_gn_if_present": true, "constater_include_subject_in_scope": true, "emit_multi_scopes": true, "coord": {"prefer_dep_label": "conj", "surface_conj": ["et", ","], "split_on_shared_head": true}, "occurrence_extract_entity": true, "occurrence_include_subject_in_scope": true, "action_vp_minimal": true, "action_include_subject_in_scope": true, "fallback": {"strategy": "WINDOW_RIGHT_SMART", "window_tokens": 8, "reject_if_only_verb": true, "exclude_verbs_from_scope": true}, "deny_if_group_present": {"group": "preposition", "labels": ["sans"], "window_tokens": 8, "precedence": "higher"}, "notes": "Le fallback ne doit jamais produire une portée réduite au verbe seul. - Si seule une forme verbale est capturée → rejeter. - Si un verbe + GN → exclure le verbe et garder le GN. - Objectif : toujours retourner un complément informatif plutôt qu’un verbe isolé. PRON_NEG_SUJET:\n  - Par défaut: portée = prédicat complet.\n  - Si le prédicat dépasse {pron_scope_max_tokens} tokens → fallback 'VP_MINIMAL_CORE':\n    * saute les verbes de montée/auxiliaires légers (RAISING_OR_LIGHT_VERBS),\n    * privilégie l’infinitif de contenu (xcomp) si présent,\n    * inclut objets/compléments essentiels (obj, xcomp, comp 'à/de'),\n    * exclut les adjuncts non essentiels (advmod/obl avec préps de ADJUNCT_PREPS_NONESSENTIAL).\n\nCOPULA_ATTR / CONSTATER / OCCURRENCE / ACTION_VP:\n  - Tous configurés avec *_include_subject_in_scope: true\n  - Donc la portée inclut aussi le sujet (ex.: \"IRM ne montre pas\" → IRM).\n", "examples": ["Personne ne tousse. → scope: personne, tousse", "Rien ne fonctionne. → scope: rien, fonctionne", "Personne ne semble vouloir reprendre le traitement en cours malgré les explications du médecin.", "Le résultat n’est pas concluant. → scope: résultat, concluant", "L’IRM ne montre pas de récidive. → scope: IRM, récidive", "La patiente n’a pas présenté de complication. → scope: patiente, complication", "Le patient ne parvient pas à avaler de liquide. → scope: patient, avaler, liquide"], "_file": "rules\\20_scopes\\bipartites.yaml"}, "cue": {"id": "NE_BIPARTITE_EXTENDED", "cue_label": "ne pas", "start": 3, "end": 15, "group": "bipartite"}, "text": "Il n’existe pas de preuve scientifique soutenant cette hypothèse.", "notes": "Relis la règle YAML, écris la règle, applique-la au cue pour générer le scope correct. Respecte start/end."}]}, "LLM_actions": [], "LLM_ajouts": {"cues": [], "scopes": []}}
{"id": 5, "text": "Le rapport mentionne l’absence de fièvre au cours de l’hospitalisation.", "pipeline_step": "STEP1_DETERMINISTIC", "candidates_rules_ID_cues": [{"group": "lexical", "rules": ["LEXICAL_NON_AVEC_OCCURENCES", "LEXICAL_NON_COMPOSE", "LEXICAL_NON_EXCEPTIONS", "LEXICAL_NON_MIXTE", "LEXICAL_ADJECTIFS_NEGATIFS", "LEXICAL_NOMS_NEGATIFS", "LEXICAL_VERBES_NEGATE_DIAG"]}, {"group": "preposition", "rules": ["PREP_NEG_GENERIQUE", "PREP_NEG_INF", "PREP_NEG_PARTICULARITE", "PREP_NEG_MODALITE", "PREP_NEG_JURIDIQUE", "PREP_NEG_SKIP", "PREP_SKIP_NON_EXCEPTIONS"]}], "cues": [{"id": "LEXICAL_NOMS_NEGATIFS", "cue_label": "absence", "start": 23, "end": 30, "group": "lexical"}, {"id": "PREP_NEG_GENERIQUE", "cue_label": "absence", "start": 23, "end": 30, "group": "preposition"}], "candidates_rules_ID_scopes": [{"group": "lexical", "rules": ["LEX_G_SKIP_LEXICALIZED", "LEX_G_CORE", "LEX_G_NEGATE_DIAG", "LEX_G_SUPPORT_AUTO"]}, {"group": "preposition", "rules": ["PREP_G_SKIP_LEXICALIZED", "PREP_SANS_CORE", "PREP_SANS_SUPPORT_AUTO", "PREP_G_FALLBACK"]}], "scopes": [], "llm_contract": {"mode": "permissive_mandatory_completion", "policy": "MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Exécute aussi toutes les pending_rules fournies : relis la règle, écris la règle et applique-la au cue.MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Priorité absolue aux candidats du runner. Si un lexème/structure indique une négation non couverte, ajoute-la avec id='LLM_FALLBACK' et group='inference', puis calcule la portée avec les mêmes stratégies. Fusionne les scopes identiques. Respecte strictement le schéma de sortie.", "rules_obligations": [{"id": "BIP_G_CORE", "require_subject": true, "description": "Inclure le sujet grammatical dans une portée distincte."}, {"id": "GOVERNOR_SUPPORT_AUTO", "require_support": true, "description": "Inclure les entités de support normatives (selon, d’après, etc.)."}, {"id": "ALL_MARKERS", "require_cue_completion": true, "description": "Compléter les marqueurs manquants si un lexème connu apparaît, même si redondant."}], "hints": {"lexeme_hits": [{"group": "bipartite", "lexeme": "ne"}], "missing_groups": ["bipartite"]}, "fallback_schema": {"cue": {"id": "LLM_FALLBACK", "group": "inference", "cue_label": "<forme canonique>", "start": -1, "end": -1}, "scope": {"id": "<STRATEGY_ID>", "scope": "<texte>", "start": -1, "end": -1}}, "pending_rules": []}, "LLM_actions": [], "LLM_ajouts": {"cues": [], "scopes": []}}
{"id": 6, "text": "Les résultats ne montrent aucune amélioration significative.", "pipeline_step": "STEP1_DETERMINISTIC", "candidates_rules_ID_cues": [{"group": "bipartite", "rules": ["NE_BIPARTITE_EXTENDED", "NE_ELLIPTIQUE_VERBAL", "NE_COEXISTE_AVEC_DETERMINANT", "NE_RESTRICTIF_EXCLUSION", "BIP_PLUS_ONLY_WITH_NE"]}, {"group": "determinant", "rules": ["AUCUN_DET_SYNONYMES_NUL", "DET_NEG_GENERIQUE", "DET_NEG_ADJ_DIFF", "DET_NEG_COOC_NE", "DET_NEG_DOUBLE_SANS", "DET_NEG_PAS_REINFORCED", "DET_NEG_JAMAIS_DET", "QC_DET_COEX_BIPARTITE"]}], "cues": [{"id": "DET_NEG_GENERIQUE", "cue_label": "aucune", "start": 26, "end": 32, "group": "determinant"}, {"id": "NE_ELLIPTIQUE_VERBAL", "cue_label": "ne", "start": 14, "end": 16, "group": "bipartite"}], "candidates_rules_ID_scopes": [{"group": "bipartite", "rules": ["BIP_G_SKIP_NE_QUE", "BIP_G_CORE", "BIP_G_COOC_DET_RESOLVE", "BIP_G_SUPPORT_AUTO"]}, {"group": "determinant", "rules": ["DET_G_CORE", "DET_G_SUPPORT_AUTO"]}], "scopes": [{"id": "BIP_G_CORE", "scope": "<LLM_APPLY_RULE>", "start": 16, "end": -1}, {"id": "DET_G_CORE", "scope": "amélioration significative", "start": 33, "end": 59}], "llm_contract": {"mode": "permissive_mandatory_completion", "policy": "MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Exécute aussi toutes les pending_rules fournies : relis la règle, écris la règle et applique-la au cue.MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Priorité absolue aux candidats du runner. Si un lexème/structure indique une négation non couverte, ajoute-la avec id='LLM_FALLBACK' et group='inference', puis calcule la portée avec les mêmes stratégies. Fusionne les scopes identiques. Respecte strictement le schéma de sortie.", "rules_obligations": [{"id": "BIP_G_CORE", "require_subject": true, "description": "Inclure le sujet grammatical dans une portée distincte."}, {"id": "GOVERNOR_SUPPORT_AUTO", "require_support": true, "description": "Inclure les entités de support normatives (selon, d’après, etc.)."}, {"id": "ALL_MARKERS", "require_cue_completion": true, "description": "Compléter les marqueurs manquants si un lexème connu apparaît, même si redondant."}], "hints": {"lexeme_hits": [{"group": "determinant", "lexeme": "aucun"}, {"group": "conjonction", "lexeme": "ni"}], "missing_groups": ["conjonction"]}, "fallback_schema": {"cue": {"id": "LLM_FALLBACK", "group": "inference", "cue_label": "<forme canonique>", "start": -1, "end": -1}, "scope": {"id": "<STRATEGY_ID>", "scope": "<texte>", "start": -1, "end": -1}}, "pending_rules": [{"policy": "READ_AND_APPLY_RULE", "rule_id": "BIP_G_CORE", "rule_yaml": {"id": "BIP_G_CORE", "when_group": "bipartite", "scope_strategy": "NEP_SMART", "options": null, "max_token_gap": 8, "stop_punct": [".", ";", ":"], "frames_order": ["PRON_NEG_SUJET", "COPULA_ATTR", "CONSTATER_EXAM", "OCCURRENCE", "ACTION_VP", "FALLBACK"], "verbs_copula_external": "BIP_VERBS_COPULA", "verbs_constater_external": "BIP_VERBS_CONSTATER", "verbs_occurrence_external": "BIP_VERBS_OCCURRENCE", "pron_neg_subjects": ["rien", "personne"], "pron_scope_policy": "full_then_minimal", "pron_scope_max_tokens": 12, "pron_minimal_strategy": "VP_MINIMAL_CORE", "raising_verbs_external": "RAISING_OR_LIGHT_VERBS", "prefer_xcomp_infinitive": true, "minimal_include_objects": true, "minimal_exclude_adjuncts": true, "adjunct_preps_nonessential_external": "ADJUNCT_PREPS_NONESSENTIAL", "copula_include_subject_in_scope": true, "constater_extract_entity": true, "prefer_de_gn_if_present": true, "constater_include_subject_in_scope": true, "emit_multi_scopes": true, "coord": {"prefer_dep_label": "conj", "surface_conj": ["et", ","], "split_on_shared_head": true}, "occurrence_extract_entity": true, "occurrence_include_subject_in_scope": true, "action_vp_minimal": true, "action_include_subject_in_scope": true, "fallback": {"strategy": "WINDOW_RIGHT_SMART", "window_tokens": 8, "reject_if_only_verb": true, "exclude_verbs_from_scope": true}, "deny_if_group_present": {"group": "preposition", "labels": ["sans"], "window_tokens": 8, "precedence": "higher"}, "notes": "Le fallback ne doit jamais produire une portée réduite au verbe seul. - Si seule une forme verbale est capturée → rejeter. - Si un verbe + GN → exclure le verbe et garder le GN. - Objectif : toujours retourner un complément informatif plutôt qu’un verbe isolé. PRON_NEG_SUJET:\n  - Par défaut: portée = prédicat complet.\n  - Si le prédicat dépasse {pron_scope_max_tokens} tokens → fallback 'VP_MINIMAL_CORE':\n    * saute les verbes de montée/auxiliaires légers (RAISING_OR_LIGHT_VERBS),\n    * privilégie l’infinitif de contenu (xcomp) si présent,\n    * inclut objets/compléments essentiels (obj, xcomp, comp 'à/de'),\n    * exclut les adjuncts non essentiels (advmod/obl avec préps de ADJUNCT_PREPS_NONESSENTIAL).\n\nCOPULA_ATTR / CONSTATER / OCCURRENCE / ACTION_VP:\n  - Tous configurés avec *_include_subject_in_scope: true\n  - Donc la portée inclut aussi le sujet (ex.: \"IRM ne montre pas\" → IRM).\n", "examples": ["Personne ne tousse. → scope: personne, tousse", "Rien ne fonctionne. → scope: rien, fonctionne", "Personne ne semble vouloir reprendre le traitement en cours malgré les explications du médecin.", "Le résultat n’est pas concluant. → scope: résultat, concluant", "L’IRM ne montre pas de récidive. → scope: IRM, récidive", "La patiente n’a pas présenté de complication. → scope: patiente, complication", "Le patient ne parvient pas à avaler de liquide. → scope: patient, avaler, liquide"], "_file": "rules\\20_scopes\\bipartites.yaml"}, "cue": {"id": "NE_ELLIPTIQUE_VERBAL", "cue_label": "ne", "start": 14, "end": 16, "group": "bipartite"}, "text": "Les résultats ne montrent aucune amélioration significative.", "notes": "Relis la règle YAML, écris la règle, applique-la au cue pour générer le scope correct. Respecte start/end."}]}, "LLM_actions": [], "LLM_ajouts": {"cues": [], "scopes": []}}
{"id": 7, "text": "Ni douleur thoracique ni dyspnée n’ont été rapportées par le patient.", "pipeline_step": "STEP1_DETERMINISTIC", "candidates_rules_ID_cues": [{"group": "conjonction", "rules": ["NI_NI_COORD", "NI_COMBINAISONS", "NI_EXCEPTIONS"]}], "cues": [{"id": "NI_NI_COORD", "cue_label": "Ni", "start": 0, "end": 2, "group": "conjonction"}, {"id": "NI_NI_COORD", "cue_label": "ni", "start": 22, "end": 24, "group": "conjonction"}], "candidates_rules_ID_scopes": [{"group": "conjonction", "rules": ["CONJ_NI_CORE", "CONJ_NI_SUPPORT_AUTO", "CONJ_NI_FALLBACK"]}], "scopes": [{"id": "CONJ_NI_CORE", "scope": "douleur thoracique", "start": 3, "end": 21}, {"id": "CONJ_NI_CORE", "scope": "dyspnée n’ont été rapportées par le patient", "start": 25, "end": 68}, {"id": "CONJ_NI_SUPPORT_AUTO", "scope": "le patient", "start": 58, "end": 68, "role": "support"}, {"id": "CONJ_NI_FALLBACK", "scope": "douleur thoracique", "start": 3, "end": 21}, {"id": "CONJ_NI_FALLBACK", "scope": "dyspnée n’ont été rapportées par le patient", "start": 25, "end": 68}], "llm_contract": {"mode": "permissive_mandatory_completion", "policy": "MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Exécute aussi toutes les pending_rules fournies : relis la règle, écris la règle et applique-la au cue.MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Priorité absolue aux candidats du runner. Si un lexème/structure indique une négation non couverte, ajoute-la avec id='LLM_FALLBACK' et group='inference', puis calcule la portée avec les mêmes stratégies. Fusionne les scopes identiques. Respecte strictement le schéma de sortie.", "rules_obligations": [{"id": "BIP_G_CORE", "require_subject": true, "description": "Inclure le sujet grammatical dans une portée distincte."}, {"id": "GOVERNOR_SUPPORT_AUTO", "require_support": true, "description": "Inclure les entités de support normatives (selon, d’après, etc.)."}, {"id": "ALL_MARKERS", "require_cue_completion": true, "description": "Compléter les marqueurs manquants si un lexème connu apparaît, même si redondant."}], "hints": {"lexeme_hits": [{"group": "bipartite", "lexeme": "n’"}], "missing_groups": ["bipartite"]}, "fallback_schema": {"cue": {"id": "LLM_FALLBACK", "group": "inference", "cue_label": "<forme canonique>", "start": -1, "end": -1}, "scope": {"id": "<STRATEGY_ID>", "scope": "<texte>", "start": -1, "end": -1}}, "pending_rules": []}, "LLM_actions": [], "LLM_ajouts": {"cues": [], "scopes": []}}
{"id": 8, "text": "Cette méthode n’est pas considérée comme une alternative fiable.", "pipeline_step": "STEP1_DETERMINISTIC", "candidates_rules_ID_cues": [{"group": "bipartite", "rules": ["NE_BIPARTITE_EXTENDED", "NE_ELLIPTIQUE_VERBAL", "NE_COEXISTE_AVEC_DETERMINANT", "NE_RESTRICTIF_EXCLUSION", "BIP_PLUS_ONLY_WITH_NE"]}], "cues": [{"id": "NE_BIPARTITE_EXTENDED", "cue_label": "ne pas", "start": 14, "end": 23, "group": "bipartite"}], "candidates_rules_ID_scopes": [{"group": "bipartite", "rules": ["BIP_G_SKIP_NE_QUE", "BIP_G_CORE", "BIP_G_COOC_DET_RESOLVE", "BIP_G_SUPPORT_AUTO"]}], "scopes": [{"id": "BIP_G_CORE", "scope": "<LLM_APPLY_RULE>", "start": 23, "end": -1}], "llm_contract": {"mode": "permissive_mandatory_completion", "policy": "MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Exécute aussi toutes les pending_rules fournies : relis la règle, écris la règle et applique-la au cue.MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Priorité absolue aux candidats du runner. Si un lexème/structure indique une négation non couverte, ajoute-la avec id='LLM_FALLBACK' et group='inference', puis calcule la portée avec les mêmes stratégies. Fusionne les scopes identiques. Respecte strictement le schéma de sortie.", "rules_obligations": [{"id": "BIP_G_CORE", "require_subject": true, "description": "Inclure le sujet grammatical dans une portée distincte."}, {"id": "GOVERNOR_SUPPORT_AUTO", "require_support": true, "description": "Inclure les entités de support normatives (selon, d’après, etc.)."}, {"id": "ALL_MARKERS", "require_cue_completion": true, "description": "Compléter les marqueurs manquants si un lexème connu apparaît, même si redondant."}], "hints": {"lexeme_hits": [{"group": "bipartite", "lexeme": "ne"}, {"group": "bipartite", "lexeme": "n’"}, {"group": "bipartite", "lexeme": "pas"}], "missing_groups": []}, "fallback_schema": {"cue": {"id": "LLM_FALLBACK", "group": "inference", "cue_label": "<forme canonique>", "start": -1, "end": -1}, "scope": {"id": "<STRATEGY_ID>", "scope": "<texte>", "start": -1, "end": -1}}, "pending_rules": [{"policy": "READ_AND_APPLY_RULE", "rule_id": "BIP_G_CORE", "rule_yaml": {"id": "BIP_G_CORE", "when_group": "bipartite", "scope_strategy": "NEP_SMART", "options": null, "max_token_gap": 8, "stop_punct": [".", ";", ":"], "frames_order": ["PRON_NEG_SUJET", "COPULA_ATTR", "CONSTATER_EXAM", "OCCURRENCE", "ACTION_VP", "FALLBACK"], "verbs_copula_external": "BIP_VERBS_COPULA", "verbs_constater_external": "BIP_VERBS_CONSTATER", "verbs_occurrence_external": "BIP_VERBS_OCCURRENCE", "pron_neg_subjects": ["rien", "personne"], "pron_scope_policy": "full_then_minimal", "pron_scope_max_tokens": 12, "pron_minimal_strategy": "VP_MINIMAL_CORE", "raising_verbs_external": "RAISING_OR_LIGHT_VERBS", "prefer_xcomp_infinitive": true, "minimal_include_objects": true, "minimal_exclude_adjuncts": true, "adjunct_preps_nonessential_external": "ADJUNCT_PREPS_NONESSENTIAL", "copula_include_subject_in_scope": true, "constater_extract_entity": true, "prefer_de_gn_if_present": true, "constater_include_subject_in_scope": true, "emit_multi_scopes": true, "coord": {"prefer_dep_label": "conj", "surface_conj": ["et", ","], "split_on_shared_head": true}, "occurrence_extract_entity": true, "occurrence_include_subject_in_scope": true, "action_vp_minimal": true, "action_include_subject_in_scope": true, "fallback": {"strategy": "WINDOW_RIGHT_SMART", "window_tokens": 8, "reject_if_only_verb": true, "exclude_verbs_from_scope": true}, "deny_if_group_present": {"group": "preposition", "labels": ["sans"], "window_tokens": 8, "precedence": "higher"}, "notes": "Le fallback ne doit jamais produire une portée réduite au verbe seul. - Si seule une forme verbale est capturée → rejeter. - Si un verbe + GN → exclure le verbe et garder le GN. - Objectif : toujours retourner un complément informatif plutôt qu’un verbe isolé. PRON_NEG_SUJET:\n  - Par défaut: portée = prédicat complet.\n  - Si le prédicat dépasse {pron_scope_max_tokens} tokens → fallback 'VP_MINIMAL_CORE':\n    * saute les verbes de montée/auxiliaires légers (RAISING_OR_LIGHT_VERBS),\n    * privilégie l’infinitif de contenu (xcomp) si présent,\n    * inclut objets/compléments essentiels (obj, xcomp, comp 'à/de'),\n    * exclut les adjuncts non essentiels (advmod/obl avec préps de ADJUNCT_PREPS_NONESSENTIAL).\n\nCOPULA_ATTR / CONSTATER / OCCURRENCE / ACTION_VP:\n  - Tous configurés avec *_include_subject_in_scope: true\n  - Donc la portée inclut aussi le sujet (ex.: \"IRM ne montre pas\" → IRM).\n", "examples": ["Personne ne tousse. → scope: personne, tousse", "Rien ne fonctionne. → scope: rien, fonctionne", "Personne ne semble vouloir reprendre le traitement en cours malgré les explications du médecin.", "Le résultat n’est pas concluant. → scope: résultat, concluant", "L’IRM ne montre pas de récidive. → scope: IRM, récidive", "La patiente n’a pas présenté de complication. → scope: patiente, complication", "Le patient ne parvient pas à avaler de liquide. → scope: patient, avaler, liquide"], "_file": "rules\\20_scopes\\bipartites.yaml"}, "cue": {"id": "NE_BIPARTITE_EXTENDED", "cue_label": "ne pas", "start": 14, "end": 23, "group": "bipartite"}, "text": "Cette méthode n’est pas considérée comme une alternative fiable.", "notes": "Relis la règle YAML, écris la règle, applique-la au cue pour générer le scope correct. Respecte start/end."}]}, "LLM_actions": [], "LLM_ajouts": {"cues": [], "scopes": []}}
{"id": 9, "text": "Hormis une légère fatigue, aucun autre effet indésirable n’a été observé.", "pipeline_step": "STEP1_DETERMINISTIC", "candidates_rules_ID_cues": [{"group": "determinant", "rules": ["AUCUN_DET_SYNONYMES_NUL", "DET_NEG_GENERIQUE", "DET_NEG_ADJ_DIFF", "DET_NEG_COOC_NE", "DET_NEG_DOUBLE_SANS", "DET_NEG_PAS_REINFORCED", "DET_NEG_JAMAIS_DET", "QC_DET_COEX_BIPARTITE"]}, {"group": "locution", "rules": ["QC_MULTIPLE_CUES", "LOCUTIONS_ABSENCE", "LOCUTIONS_EXCLUSION", "LOCUTIONS_PRIVATION", "LOCUTIONS_COMPARATIVES", "LOCUTIONS_EXCEPTION"]}], "cues": [{"id": "DET_NEG_GENERIQUE", "cue_label": "aucun", "start": 27, "end": 32, "group": "determinant"}, {"id": "DET_NEG_ADJ_DIFF", "cue_label": "aucun", "start": 27, "end": 32, "group": "determinant"}, {"id": "LOCUTIONS_EXCEPTION", "cue_label": "Hormis", "start": 0, "end": 6, "group": "locution"}], "candidates_rules_ID_scopes": [{"group": "determinant", "rules": ["DET_G_CORE", "DET_G_SUPPORT_AUTO"]}, {"group": "locution", "rules": ["LOC_G_SKIP_NON_ASSERTIVE", "LOC_G_CORE", "LOC_G_SUPPORT_AUTO", "LOC_G_FALLBACK"]}], "scopes": [{"id": "DET_G_CORE", "scope": "autre effet indésirable n'a été observé", "start": -1, "end": -1}], "llm_contract": {"mode": "permissive_mandatory_completion", "policy": "MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Exécute aussi toutes les pending_rules fournies : relis la règle, écris la règle et applique-la au cue.MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Priorité absolue aux candidats du runner. Si un lexème/structure indique une négation non couverte, ajoute-la avec id='LLM_FALLBACK' et group='inference', puis calcule la portée avec les mêmes stratégies. Fusionne les scopes identiques. Respecte strictement le schéma de sortie.", "rules_obligations": [{"id": "BIP_G_CORE", "require_subject": true, "description": "Inclure le sujet grammatical dans une portée distincte."}, {"id": "GOVERNOR_SUPPORT_AUTO", "require_support": true, "description": "Inclure les entités de support normatives (selon, d’après, etc.)."}, {"id": "ALL_MARKERS", "require_cue_completion": true, "description": "Compléter les marqueurs manquants si un lexème connu apparaît, même si redondant."}], "hints": {"lexeme_hits": [{"group": "bipartite", "lexeme": "ne"}, {"group": "bipartite", "lexeme": "n’"}], "missing_groups": ["bipartite"]}, "fallback_schema": {"cue": {"id": "LLM_FALLBACK", "group": "inference", "cue_label": "<forme canonique>", "start": -1, "end": -1}, "scope": {"id": "<STRATEGY_ID>", "scope": "<texte>", "start": -1, "end": -1}}, "pending_rules": []}, "LLM_actions": [], "LLM_ajouts": {"cues": [], "scopes": []}}
{"id": 10, "text": "Un traitement non invasif a été privilégié dans cette étude.", "pipeline_step": "STEP1_DETERMINISTIC", "candidates_rules_ID_cues": [{"group": "lexical", "rules": ["LEXICAL_NON_AVEC_OCCURENCES", "LEXICAL_NON_COMPOSE", "LEXICAL_NON_EXCEPTIONS", "LEXICAL_NON_MIXTE", "LEXICAL_ADJECTIFS_NEGATIFS", "LEXICAL_NOMS_NEGATIFS", "LEXICAL_VERBES_NEGATE_DIAG"]}, {"group": "preposition", "rules": ["PREP_NEG_GENERIQUE", "PREP_NEG_INF", "PREP_NEG_PARTICULARITE", "PREP_NEG_MODALITE", "PREP_NEG_JURIDIQUE", "PREP_NEG_SKIP", "PREP_SKIP_NON_EXCEPTIONS"]}], "cues": [{"id": "LEXICAL_NON_AVEC_OCCURENCES", "cue_label": "non", "start": 14, "end": 17, "group": "lexical"}, {"id": "LEXICAL_NON_MIXTE", "cue_label": "non", "start": 14, "end": 17, "group": "lexical"}, {"id": "PREP_SKIP_NON_EXCEPTIONS", "cue_label": "non", "start": 14, "end": 17, "group": "preposition"}], "candidates_rules_ID_scopes": [{"group": "lexical", "rules": ["LEX_G_SKIP_LEXICALIZED", "LEX_G_CORE", "LEX_G_NEGATE_DIAG", "LEX_G_SUPPORT_AUTO"]}, {"group": "preposition", "rules": ["PREP_G_SKIP_LEXICALIZED", "PREP_SANS_CORE", "PREP_SANS_SUPPORT_AUTO", "PREP_G_FALLBACK"]}], "scopes": [], "llm_contract": {"mode": "permissive_mandatory_completion", "policy": "MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Exécute aussi toutes les pending_rules fournies : relis la règle, écris la règle et applique-la au cue.MUST_COMPLETE_MISSING: Tu DOIS compléter tout sujet, support ET tout marqueur manquant en respectant les règles YAML. Priorité absolue aux candidats du runner. Si un lexème/structure indique une négation non couverte, ajoute-la avec id='LLM_FALLBACK' et group='inference', puis calcule la portée avec les mêmes stratégies. Fusionne les scopes identiques. Respecte strictement le schéma de sortie.", "rules_obligations": [{"id": "BIP_G_CORE", "require_subject": true, "description": "Inclure le sujet grammatical dans une portée distincte."}, {"id": "GOVERNOR_SUPPORT_AUTO", "require_support": true, "description": "Inclure les entités de support normatives (selon, d’après, etc.)."}, {"id": "ALL_MARKERS", "require_cue_completion": true, "description": "Compléter les marqueurs manquants si un lexème connu apparaît, même si redondant."}], "hints": {"lexeme_hits": [], "missing_groups": []}, "fallback_schema": {"cue": {"id": "LLM_FALLBACK", "group": "inference", "cue_label": "<forme canonique>", "start": -1, "end": -1}, "scope": {"id": "<STRATEGY_ID>", "scope": "<texte>", "start": -1, "end": -1}}, "pending_rules": []}, "LLM_actions": [], "LLM_ajouts": {"cues": [], "scopes": []}}
